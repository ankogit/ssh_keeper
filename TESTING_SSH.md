# Тестирование SSH функциональности

## Подготовка

1. **Скомпилируйте приложение:**
   ```bash
   go build -mod=mod -o ssh-keeper cmd/ssh-keeper/main.go
   ```

2. **Убедитесь, что SSH сервер доступен:**
   ```bash
   ssh root@95.216.195.202
   ```

## Тестирование через приложение

### Шаг 1: Запуск приложения
```bash
./ssh-keeper
```

### Шаг 2: Навигация к подключениям
1. В главном меню выберите **"1"** или **"Подключения"**
2. Вы увидите список подключений, включая "Test Server (Password Auth)"

### Шаг 3: Подключение к серверу
1. Используйте стрелки **↑/↓** для навигации по списку
2. Выберите **"Test Server (Password Auth)"**
3. Нажмите **Enter** для подключения

### Шаг 4: Ввод пароля
1. Приложение запросит пароль для сервера
2. Введите пароль и нажмите **Enter**

### Шаг 5: SSH сессия
1. После успешного подключения откроется SSH сессия
2. Вы сможете выполнять команды на удаленном сервере
3. Для выхода из SSH сессии используйте **Ctrl+D** или **exit**

## Тестирование через тестовый скрипт

### Альтернативный способ тестирования:
```bash
go run -mod=mod test_ssh.go
```

Этот скрипт:
1. Запросит пароль
2. Покажет команду SSH
3. Протестирует подключение
4. Запустит полную SSH сессию

## Ожидаемое поведение

### ✅ Успешное подключение:
- Приложение переходит к экрану SSH сессии
- Запрашивается пароль (если требуется)
- Открывается интерактивная SSH сессия
- Пользователь может выполнять команды на удаленном сервере

### ❌ Ошибки подключения:
- Отображается сообщение об ошибке
- Пользователь может вернуться к списку подключений
- Приложение остается стабильным

## Отладка

### Если SSH не работает:
1. **Проверьте подключение к серверу:**
   ```bash
   ssh root@95.216.195.202
   ```

2. **Проверьте логи приложения:**
   - Ошибки отображаются в консоли
   - Проверьте правильность IP адреса и порта

3. **Проверьте SSH ключи:**
   - Убедитесь, что ключи существуют
   - Проверьте права доступа к файлам ключей

### Если PTY не работает:
1. **Проверьте зависимости:**
   ```bash
   go mod tidy
   ```

2. **Проверьте платформу:**
   - PTY работает на Unix-системах (Linux, macOS)
   - На Windows может потребоваться WSL

## Команды для тестирования

### Проверка подключения:
```bash
# Тест SSH подключения
ssh -o ConnectTimeout=10 root@95.216.195.202 "echo 'SSH работает'"

# Тест с ключом (если используется)
ssh -i test_keys/test_key root@95.216.195.202 "echo 'SSH с ключом работает'"
```

### Проверка PTY:
```bash
# Тест PTY функциональности
go run -mod=mod test_ssh.go
```

## Результат

После успешного тестирования вы должны увидеть:
1. **TUI интерфейс** с списком подключений
2. **Возможность выбора** сервера для подключения
3. **Запрос пароля** (если требуется)
4. **Интерактивную SSH сессию** с полной функциональностью
5. **Корректный возврат** в TUI после завершения SSH сессии

Это подтверждает, что SSH функциональность работает согласно PROJECT_DESIGN.md!

